# Insulin-pump-simulator
SCS
Insulin glucagon pump simulator
SAFETY CRITICAL SYSTEMS PROJECT REPORT ON INSULIN PUMP (SIMULATOR) Under the Guidance of Prof. Dr. Matthias Wagner
  Table of Contents Abstract - 2 - Application Idea - 2 - Project Management - 3 - Project Scope - 3 - Task Distribution - 4 - Project Milestones - 5 - Software Configuration Management (SCM) - 5 - Project Plan - 6 - Process Model - 7 - Design Model - 7 - Component Model - 7 - Controller - 7 - Model - 8 - View - 8 - Simulator Prototype - 10 - Application Work flow diagram - 10 - GUI Design - 11 - Graphical User-Interface – At a glance - 12 - An Approach to Test – V-Model - 12 - Testing Planned – Iterations - 13 - Testing Status - 13 - Graphical Review - 14 - References - 14 -
  Abstract The insulin pump is medical device which administers the sugar level in the blood and it injects the insulin in the blood as and when required. The insulin pump, working as an automatic system, generates warning to the user when required in case of variations in the blood sugar level when it moves out of threshold level. The sugar level or blood glucose level or blood sugar concentration can be defined as the amount of glucose or sugar in human blood. The intention of this project is to simulate a standard Insulin Glucagon Pump software which is a safety critical system. Here in this project, we categorize the simulated blood sugar levels into the Dangerous, Safe and critical groups using our simulated blood sugar levels (ideally coming from the sensor in a real model) and take appropriate action like injection of insulin or glucagon accordingly. Warnings and error scenarios can also be simulated to validate exceptional conditions that may occur. Introduction [1]Diabetes, often referred to by doctors as diabetes mellitus, describes a group of metabolic diseases in which the person has high blood glucose (blood sugar), either because insulin production is inadequate, or because the body's cells do not respond properly to insulin, or both. Insulin/glucagon pumps deliver the required hormone in a way similar to how the pancreas delivers the hormone in a healthy environment. [2]Using this pump, the patient can deliver insulin/glucagon to his body on a regular basis which is called as the Basal rate and also at additional times which is called as Bolus rate. Special conditions like sleeping or exercising can be specially configured to deliver appropriate hormone for regular functioning of the body. Bolus is considered when an extra dosage of any hormone is required. For example, if the patient has consumed extra food. Functioning of Pump Insulin/Glucagon pumps deliver insulin or glucagon all through day and night through a catheter placed under the skin. Hormone doses are controlled by: • Basal rates • Bolus rates Application Idea We achieve the following goals in the Insulin Pump project:  Insulin pump simulator will work like real insulin pump, for that we embedded the main and necessary functionalities in our Insulin simulator. It will run automatically as per patient requirement to reduce manual work.  Install tools for java programming to build insulin pump simulator.  We did some R&D about real insulin pump device and notice down all functionalities which are already embedded in insulin device.  Design a graphical user interface of the data and visualize it using GUI.  Define all threshold which are required for real-time alert.  Create MVC model for that and divide our simulator in three different parts: Model, View and Components models to make project easy for development.  Create, required buttons to handle insulin pump simulator from GUI to show patient dieses status.  Assign some new functions in java e.g. Sprite to show real-time performance for battery and insulin reservoir.  Implement some algorithms to calculate Blood sugar level (BSL).  Add manual option for patients to use it as per their requirements.  Make application language independent using icons.  Add color chooser feature for blind people which caused by retinopathy (High BSL).  It shows Insulin Injection status and total number of dose inside body.  Shows Blood sugar level in two forms (graph and numerical format).  smart Graphical User Interface for and  Shows insulin simulator status (ready, stop, running and error).  Shows insulin simulator running time. Project Management Project Scope The aim of this project for the “Safety Critical Systems (SCS)” course, module of the “High Integrity Systems (HIS)” Master program at the Frankfurt - University of Applied Sciences is to educate students on the development of SCS. The goal of this Project is to develop an Application that simulates the behavior of an Insulin Pump. To simulate the behavior of this insulin pump simulator is to show actual result of blood sugar level. The Simulation of the blood sugar level is going to imitate the behavior of a human’s blood sugar level under influences like insulin injections, food and increased physical work. The Simulation of the Insulin Pump is going to read the blood sugar level from the other simulation and will cause insulin injections to keep the blood sugar level in a nominal band.
Task Distribution The project can be broadly bifurcated into various folds based on the software life cycle. The tasks for this project are distributed among all members (five), this distribution will help to contribute in all areas of the project and also create mutual understanding in members. Each role is assigned according to their feasibility and expertise. In SCS Project, total 4 members work on this project as mentioned below.
Sr. No. Life Cycle – Fold Member-in Charge 1 Requirement Analysis All team members 2 Design Implementation Manoj Murugan 3 Coding Manoj Murugan / Varun Varadarajan 4 Testing – Design Sneha Sahu  Test Implementation Manjunath AL 6 Documentation All team members


Project Milestones
Software Configuration Management (SCM) This project is handled through SCM which will use SVN for share repository, and which help us for distributed source files, each bug can be handle and remove through different patches and versions. Test plan will be updated according to each iteration of software testing.
  Project Plan
Process Model Each project follow some models for their successful completion. Choosing good process model effect on project Cost, time, performance and improvement. In SCS we follow which help us during software life cycle. Each project almost have same steps for their successful completion. In our project process model will cover following aspects.
1.	System Initiation/Planning
2.	Requirements Analysis and Specification
3.	Functional Specification or Prototyping
4.	Partition and Selection
5.	Architectural Design and Configuration Specification
6.	Detailed component Design Specification
7.	Software Integration and Testing
8.	Documentation Revision and System delivery
9.	Deployment and Installation
10.	Training and Use
11.	Software Maintenance Design Model In design model we have embedded MVC and data flow diagram, which are mentioned below. Component Model As we already discussed about Model-View-Controller (MVC) Pattern and observer pattern in this document. Here we would like to present Component model and relationship between Model-View-Controller modules. [3]The architecture follows the Model-View-Controller pattern. It separates the user interaction from information storage. There are three components model, view and controller: Controller: Works with the user takes in data & works with the model to get the appropriate data or calculation works with the view to show the response to the user.
Component Model
Model: is a representation of something which needs to deal within the application is responsible for holding the functions and variables that are involved with whatever it's representing View: It is just like the application's template system: there might be a view for a certain type of page layout (profile page). The model consists of the application data, the view realize the GUI and the controller implements the business logic. The Insulin Pump Simulation has different events for which the Observer pattern is used. Some examples events are the system timer and the battery level which needs to be continuously updated. Further the designed application follows the Singleton pattern, which restricts the instantiation of a class to one object. The controller class controlling the application is instantiated once. Simulator Prototype Application Work flow diagram
GUI Design Before developing the software architecture we start with the architecture design by designing the GUI to gain some basic idea about the functionalities of the application. Designing the GUI first helped us to identify the applications states, functions and the data it works with. The window for the application consists of following parts: • Login Screen • Registration Form • Insulin Glucagon Pump Control Panel Insulin Glucagon Pump Control Panel is currently our running module. In this module we added some functionalities which perform different activities. • In this module on successful login, it will start the simulator. • We have "Recharge" and "Refill" button. Battery has to be recharged by Recharge button. Refill button is used to refill insulin or glucagon reservoir. • Auto Mode button is used to change operating mode of insulin dose, activities, required insulin units. • Timer control: this controller is used to maximize/minimize time speed to draw graph. • Dose: In this text area message has to be displayed for current dose status. • Inject button is used to inject insulin in body. • Message display area is used to show alerts and threshold for each alter or warning.
Dosage computation algorithm • Dosage will be computed by measuring the current level of blood sugar and based on previous readings. • Blood sugar level is monitored continuously and hormone is injected accordingly. • Amount of hormone to be delivered shall be computed according to the current sugar reading as per the simulator [4]Case 1: If the reading is below the safe minimum, glucagon shall be delivered. C5ase 2: If the reading is within the safe zone, then insulin should be delivered only if the sugar level is rising and the rate of increase of sugar level is increasing. Hormone dosage is defined on the basis of the following algorithm: computedDosage = result dosage that is computed r2 = current reading r1 = previous reading r0 = reading before that If (r2 >= safeMin && r2 <= safeMax) { //sugar level stable or falling if (r2 <= r1) computedDosage = 0; //sugar level increasing but rate of increase falling Else if ((r2 > r1) && ((r2 – r1) < (r1 – r0))) computedDosage = 0; // sugar level increasing and rate of increase increasing, so compute dosage //a minimum dosage must be delivered if Rounded to zero Else if ((r2 > r1) && ((r2 – r1) >= (r1 – r0)) && (round ((r2 – r1) / 4) > 0)) computedDosage = round((r2 – r1) / 4); Else if ((r2 > r1) && ((r2 – r1) >= (r1 – r0)) && ((round (r2 – r1) / 4) = 0)) computedDosage = minimumDosage; } Case 3: If the reading is above the safe zone, insulin is delivered unless the blood sugar level is decreasing and the rate of decrease of blood sugar level is increasing too. Hormone dosage we defined on the basis of the following algorithm: If (r2 > safeMax) { //sugar level increasing If ((r2 > r1) && (round ((r2 – r1) / 4) = 0)) computedDosage = minimumDosage; Else if ((r2 > r1) && (round ((r2 – r1) / 4) > 0)) computedDosage = round ((r2 – r1) / 4); //sugar level stable else if (r2 == r1) computedDosage = minimumDosage; //sugar level falling and rate of decrease increasing Else if ((r2 < r1) && ((r2 – r1) <= (r1 – r0))) computedDosage = 0 //sugar level falling and rate of decrease decreasing Else if ((r2 < r1) && ((r2 – r1) > (r1 – r0))) computedDosage = minimumDosage }
Graphical User-Interface – At a glance
Sign In Screen
                                                                        Registration Screen
                                                                           


                                                               
                                                                Forgot Password
                                                               



                                                                             Simulator screen 1


                                                                   
                                                                     Simulator screen 2
Application Overview • The application starts with login screen where only an authenticated user can login to the system. • On Successful Login the user will be directed to Insulin/Glucagon control panel. • On Unsuccessful Login the user is asked to check the username and password. • If it is a new user he/she is told to register. • Insulin/Glucagon control panel consists of various user interface buttons such as Bolus, Exit and Generate Report. Bolus  On click of bolus button user is directed to another UI screen where he can select simulation to be Auto or manual.  On selecting Auto radio button then clicking on Compute button the Insulin/Glucagon which has to pumped in is shown on the application and on click of inject Insulin/Glucagon is injected.  On selecting Manual radio button user can manually set the blood sugar level based on the value of blood sugar level the corresponding insulin/Glucagon is injected. Exit
 On click of exit the application will be closed. Generate Report  On click of a Generate Report button a pdf document will be generated with the signed in patient historical data.
Software used:
Technology used: Java JDK: 1.8 IDE: Netbeans, Eclipse Concept: Swings Libraries: PdfLib-Itext-pdfa,jcommon.jar, jfreechart.jar, derby.jar, mailapi.jar, smtp.jar Database: derby
An Approach to Test – V-Model
[5]The V-Model represents a software development process (also applicable to hardware Development) which may be considered an extension of the waterfall model. Instead of moving down in a linear way, the process steps are bent upwards after the coding phase, to form the typical V shape. The V-Model demonstrates the relationships between each phase of the development life cycle and its associated phase of testing. The horizontal and vertical axis represents time or project completeness (left-to-right) and level of abstraction (coarsest-grain abstraction uppermost), respectively.
Testing Planned – Iterations Below are the testing report as per the planned iterations. We decided to have the overall system and integration testing into two iterations. Since, the testing requires the testing of a critical system hence the second iteration includes all the test cases along with the special testing of the failed cases of the first iteration. Testing Status Sr. No Category Numbers 1 Total Number of Requirements 14 2 Total Number of Scenarios 14 3 Total Number of Test Cases 43 4 Total Number of Planned Iterations 2 5 Total number of testing iterations completed 2
OVERALL EXECUTION SUMMARY Sr. No Categories Iteration 1 Iteration 2 1 Total number of Test cases 44 44 2 No of test cases Passed 34 44 3 No of test cases Failed 10 0 4 Total no of Defects encountered 6 0 5 Number of Test cases for next Iteration 10 NA
Graphical Review
Future Enhancements:
1.	Incorporating the concept of internet of things, thereby making use of this software to monitor the patient's health sugar statistics remotely at the doctor's end through some portable devices like watches, mobile phones etc.
2.	This sugar level will be monitored by software and constantly updates the doctor remotely via internet and also schedules an appointment in case of emergency.
3.	Provide daily / weekly suggestions on the food intake based upon his previous diet statistics.
4.	We can implement voice response and commands to interact with the user .
5.	We can implement a sos to nearby or close relatives in case of emergencies.
References
1.	http://en.wikipedia.org/wiki/Insulin_pump
2.	http://www.diabetes.co.uk/insulin/Insulin-pumps.html
3.	Buschmann, Frank (1996) Pattern-Oriented Software Architecture
4.	Software Engineering https://books.google.de/books?isbn=0321313798
5.	Buschmann, Frank (1996) Pattern-Oriented Software Architecture
6.	https://en.wikipedia.org/wiki/V-Model_%28software_development%29

